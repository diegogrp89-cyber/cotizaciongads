<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cotización - GAD’s Safety & Vertical Access</title>

<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; padding:20px; }
.card { max-width:800px; margin:auto; background:#fff; padding:25px; border-radius:10px; }
input, select { width:100%; padding:8px; margin-top:5px; }
button { margin-top:15px; padding:12px; width:100%; background:#27ae60; color:#fff; border:none; border-radius:5px; font-size:16px; cursor:pointer; }
.table { width:100%; border-collapse:collapse; margin-top:15px; }
.table td, .table th { border:1px solid #ccc; padding:8px; }
#documento { display:none; }

@media print {
  #formulario { display:none; }
  #documento { display:block; }
}
</style>
</head>

<body>

<!-- FORMULARIO -->
<div class="card" id="formulario">
  <h2>Calculadora de Cotización</h2>

  <label>Cliente</label><input id="cliente">
  <label>Dirección</label><input id="direccion">

  <label>m²</label><input id="m2" type="number">
  <label>Precio por m²</label><input id="precio" value="10">
  <label>Días</label><input id="dias" value="1">
  <label>Técnicos</label><input id="tecnicos" value="1">

  <label>Altura</label>
  <select id="altura">
    <option value="0">No</option>
    <option value="0.10">+10%</option>
    <option value="0.20">+20%</option>
  </select>

  <label><input type="checkbox" id="sucio"> Vidrio contaminado</label>
  <label><input type="checkbox" id="nocturno"> Trabajo nocturno</label>
  <label><input type="checkbox" id="igv"> Incluir IGV</label>

  <button type="button" onclick="calcular()">Calcular</button>
  <button type="button" onclick="generarPDF()">Generar PDF</button>
</div>

<!-- DOCUMENTO FORMAL -->
<div class="card" id="documento">
  <img src="logo.png" height="70"><br>
  <h2>GAD’s Safety & Vertical Access</h2>

  <p><b>Cotización N°:</b> <span id="numCot"></span></p>
  <p><b>Cliente:</b> <span id="dCliente"></span></p>
  <p><b>Dirección:</b> <span id="dDireccion"></span></p>
  <p><b>Fecha:</b> <span id="fecha"></span></p>

  <table class="table">
    <tr>
      <th>N°</th>
      <th>Descripción</th>
      <th>Monto (S/)</th>
    </tr>
    <tr>
      <td>01</td>
      <td>SERVICIO DE MANTENIMIENTO Y LIMPIEZA DE FACHADA MEDIANTE ACCESO POR CUERDA</td>
      <td id="totalPDF"></td>
    </tr>
    <tr>
      <td> </td>
      <td>IGV 18%</td>
      <td id="igvPDF"></td>
    </tr>
    <tr>
      <td> </td>
      <th>TOTAL</th>
      <th id="finalPDF"></th>
    </tr>
  </table>

  <p style="margin-top:50px">___________________________<br>Diego Romero Paredes<br>GAD’s Safety & Vertical Access</p>
</div>

<script>
function calcular(){
  let m2=+m2Input.value, p=+precio.value, d=+dias.value, t=+tecnicos.value;
  let base=m2*p*3, eq=d*100, pas=t*30;
  let rec=base*(+altura.value)+(sucio.checked?base*0.15:0)+(nocturno.checked?base*0.25:0);
  let sub=base+eq+pas+rec, ig=igv.checked?sub*0.18:0, tot=sub+ig;

  guardarCotizacion();

  dCliente.textContent=cliente.value;
  dDireccion.textContent=direccion.value;
  fecha.textContent=new Date().toLocaleDateString();

  totalPDF.textContent=sub.toFixed(2);
  igvPDF.textContent=ig.toFixed(2);
  finalPDF.textContent=tot.toFixed(2);
}

function generarPDF(){
  window.print();
}

function guardarCotizacion(){
  let n=localStorage.getItem("cot")||0;
  n++;
  localStorage.setItem("cot",n);
  numCot.textContent="COT-2026-"+String(n).padStart(3,"0");
}

const cliente=document.getElementById("cliente"),
direccion=document.getElementById("direccion"),
m2Input=document.getElementById("m2"),
precio=document.getElementById("precio"),
dias=document.getElementById("dias"),
tecnicos=document.getElementById("tecnicos"),
altura=document.getElementById("altura"),
sucio=document.getElementById("sucio"),
nocturno=document.getElementById("nocturno"),
igv=document.getElementById("igv");
</script>

</body>
</html>
